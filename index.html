<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	</head>
	<body>
		<script>
			
			function capturaRest(){
				var x = document.getElementById("Listado").value;
				var display = document.getElementById("ContenidosREST");
				var xmlhttp = new XMLHttpRequest();
				xmlhttp.open("GET", "curl.php?entrada=" + x, true);
				xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
				xmlhttp.send();
				xmlhttp.onreadystatechange = function() {
					if (this.readyState === 4 && this.status === 200) {
						display.innerHTML = this.responseText;
					} else {
						display.innerHTML = this.responseText;;
					};
				}
			}
						
			function muestraPais(cadena)		
			{
				if (!soloNombre(cadena))
				{
					if (cadena.length == 0)
					{
						document.getElementById("Listado").innerHTML = "";
						return;
					}
					else
					{
						var xmlhttp = new XMLHttpRequest();
						xmlhttp.onreadystatechange = function()
						{
							if (this.readyState == 4 && this.status == 200)
							{
								document.getElementById("Listado").innerHTML = this.responseText;
							}
						};
						xmlhttp.open("GET", "listado.php?entrada=" + unescape(cadena), true);
						xmlhttp.send();
					}
				}
				else
				{
					window.alert("Aviso: Debe introducir caracteres en el nombre del pais");
				}
			}
				
			function soloNombre(myString)
			{
				return /\d/.test(myString);
			}			
	
			function seleccion()
			{
				var x = document.getElementById("Listado").value;
				document.getElementById("Resultados").innerHTML = "Has seleccionado el c&oacute;digo: " + x;
			}
		</script>
		
		<p><b>Comience a escribir el nombre de un pais y comenzar&aacute; la b&uacute;squeda:</b></p>
		<form>
			Nombre del pais: <input type="text" onkeyup="muestraPais(this.value)">
			<p><h6>Puede escribir los primeros caracteres, los resultados se insertan en el desplegable inferior.</h6></p>
			<p><h6>Cuantos m&aacute;s caracteres introduzca, el filtro ser&aacute; mayor</h6></p>
		</form>
		Listado de paises posibles:
		<select id="Listado" onchange="capturaRest()" size=4>
		</select>
		<br><br>
		<div id="ContenidosREST" style="background-color:lightblue"/>
		<h3>Resultados de la consulta REST</h3>
		</div> 
	</body>
</html> 
